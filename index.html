<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Redux</title>
  <script src="./redux.min.js"></script>
  <script src="./immer.umd.production.min.js"></script>
</head>

<body>
  <div>
    <h1>Aluno</h1>
    <p><b>Nome:</b> <span id="nome"></span></p>
    <p><b>Email:</b> <span id="email"></span></p>
    <p><b>Dias restantes:</b> <span id="diasRestantes"></span></p>
    <p><b>Total aulas completas:</b> <span id="totalAulasCompletas"></span></p>
  </div>
  <script type="module">
    import store from './store/configureStore.js'
    import { incrementarTempo, reduzirTempo, modificarEmail } from './store/alunoReducer.js'
    import { completarAula, completarCurso, resetarCurso } from './store/aulasReducer.js'

    function render() {
      const nome = document.getElementById('nome');
      const email = document.getElementById('email');
      const diasRestantes = document.getElementById('diasRestantes');
      const totalAulasCompletas = document.getElementById('totalAulasCompletas');

      const { alunoReducer, aulasReducer } = store.getState()

      nome.innerText = alunoReducer.nome;
      email.innerText = alunoReducer.email;
      diasRestantes.innerText = alunoReducer.diasRestantes;
      totalAulasCompletas.innerText = aulasReducer.filter((aula) => aula.completa === true).length;

    }
    render();
    store.subscribe(render);

    store.dispatch(reduzirTempo());
    store.dispatch(modificarEmail('andre@hotmail.com'));
    store.dispatch(resetarCurso());
    store.dispatch(completarAula(3));
  </script>
</body>

</html>